<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Fab City Widget - Embed Example</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 40px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    h1 {
      color: #333;
      margin-bottom: 10px;
    }
    .subtitle {
      color: #666;
      font-size: 18px;
      margin-bottom: 30px;
    }
    .info-box {
      background: #f8f9fa;
      border-left: 4px solid #667eea;
      padding: 20px;
      margin: 20px 0;
      border-radius: 4px;
    }
    .info-box h3 {
      margin-top: 0;
      color: #333;
    }
    .info-box p {
      margin: 10px 0;
      color: #555;
      line-height: 1.6;
    }
    .info-box code {
      background: #e9ecef;
      padding: 2px 6px;
      border-radius: 3px;
      font-family: 'Courier New', monospace;
      color: #d63384;
    }
    .domain-info {
      background: #d4edda;
      border-left-color: #28a745;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üèôÔ∏è Fab City AI Chat Widget</h1>
    <p class="subtitle">Example integration - This is how the widget appears on client websites</p>
    
    <div class="info-box">
      <h3>üìç Current Domain Detection</h3>
      <p>The widget automatically detects the domain it's embedded on and sends this information to your n8n workflow.</p>
      <p><strong>Current domain:</strong> <code id="current-domain">Loading...</code></p>
      <p>This allows your n8n IF node to route conversations to different AI agents based on the domain (e.g., learn.fabcity.com vs network.fabcity.com)</p>
    </div>

    <div class="info-box">
      <h3>üéØ How It Works</h3>
      <p><strong>1.</strong> User asks a question on the website</p>
      <p><strong>2.</strong> Widget captures: <code>message</code>, <code>sessionId</code>, and <code>domain</code></p>
      <p><strong>3.</strong> Data is sent to your API server</p>
      <p><strong>4.</strong> API forwards to n8n webhook with all three fields</p>
      <p><strong>5.</strong> n8n IF node routes based on domain to appropriate AI agent</p>
      <p><strong>6.</strong> Response comes back and displays in the chat</p>
    </div>

    <div class="domain-info info-box">
      <h3>‚ú® Try It Out!</h3>
      <p>Click the chat button in the bottom-right corner to test the widget.</p>
      <p>Check your browser console (F12) to see the domain and session information being sent.</p>
    </div>

    <h2 style="margin-top: 40px;">Sample Content</h2>
    <p>This is sample content for the page. The chat widget floats in the bottom-right corner and works on any page.</p>
    <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>
  </div>

  <!-- 
    ============================================
    FAB CITY WIDGET EMBED CODE
    Copy the code below to embed on client sites
    ============================================
  -->
  
  <!-- Step 1: Configure the widget (optional) -->
  <script>
    window.FabCityConfig = {
      apiUrl: 'http://localhost:3001' // Change this to your production API URL
    };
  </script>
  
  <!-- Step 2: Load the widget CSS -->
  <link rel="stylesheet" href="./dist-embed/fabcity-widget.css">
  
  <!-- Step 3: Load the widget JavaScript -->
  <script src="./dist-embed/fabcity-widget.js"></script>

  <!-- Display current domain -->
  <script>
    document.getElementById('current-domain').textContent = window.location.hostname;
  </script>
</body>
</html>

